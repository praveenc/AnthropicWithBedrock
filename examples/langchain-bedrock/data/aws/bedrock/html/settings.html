<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Settings - Amazon Bedrock</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="settings" /><meta name="default_state" content="settings" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/bedrock/latest/userguide/settings.html" /><meta name="description" content="Learn how to set data logs, data permissions, and model access to Amazon Bedrock custom and base models." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Bedrock" /><meta name="guide" content="User Guide" /><meta name="abstract" content="User Guide for the Amazon Bedrock service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/bedrock/latest/userguide/settings.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/bedrock/latest/userguide/settings.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/bedrock/latest/userguide/settings.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/bedrock/latest/userguide/settings.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/bedrock/latest/userguide/settings.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/bedrock/latest/userguide/settings.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/bedrock/latest/userguide/settings.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/bedrock/latest/userguide/settings.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/bedrock/latest/userguide/settings.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/bedrock/latest/userguide/settings.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/bedrock/latest/userguide/settings.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/bedrock/latest/userguide/settings.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/bedrock/latest/userguide/settings.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/bedrock/latest/userguide/settings.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/bedrock/latest/userguide/settings.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/bedrock/latest/userguide/settings.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/bedrock/latest/userguide/settings.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/bedrock/latest/userguide/settings.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/bedrock/latest/userguide/settings.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/bedrock/latest/userguide/settings.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/bedrock/latest/userguide/settings.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/bedrock/latest/userguide/settings.html" hreflang="x-default" /><meta name="feedback-folder" content="2d8c2a09-1dac-41bf-9893-c0333d272b2c" /><meta name="feedback-item" content="Bedrock" /><meta name="this_doc_product" content="Amazon Bedrock" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'bedrock'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Settings" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Settings - Amazon Bedrock</title><meta name="pdf" content="/pdfs/bedrock/latest/userguide/bedrock-ug.pdf#settings" /><meta name="rss" content="bedrock-ug.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=2d8c2a09-1dac-41bf-9893-c0333d272b2c&amp;topic_url=http://docs.aws.amazon.com/en_us/bedrock/latest/userguide/settings.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/bedrock/latest/userguide/settings.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/bedrock/latest/userguide/settings.html" /><meta name="keywords" content="Amazon Bedrock,bedrock" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Bedrock",
        "item" : "https://docs.aws.amazon.com/bedrock/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/bedrock/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Settings",
        "item" : "https://docs.aws.amazon.com/bedrock/latest/userguide/settings.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/bedrock/latest/userguide/bedrock-ug.pdf#settings" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/bedrock/index.html">Amazon Bedrock</a><a href="what-is-bedrock.html">User Guide</a></div><div id="page-toc-src"><a href="#model-invocation-logging">Model invocation logging</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="settings">Settings</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can manage your account level settings for Amazon Bedrock in the <b>Settings</b> page. The 
        settings include data logs, data permissions, and model access.</p><p>To access settings, go to the bottom of the left-side navigation
        pane in Amazon Bedrock, and select <b>Settings</b>.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#model-invocation-logging">Model invocation logging</a></li></ul></div>
        <h2 id="model-invocation-logging">Model invocation logging</h2>

        <p><b>Model invocation logging</b> can be used to collect invocation logs,
            model input data, and model output data for all invocations in your AWS account used
            in Amazon Bedrock. By default, logging is disabled.</p>
        
        <p>With invocation logging, you can collect the full request data, response data, and
            metadata associated with all calls performed in your account. Logging can be configured
            to provide the destination resources where the log data will be published. Supported
            destinations include Amazon CloudWatch Logs and Amazon Simple Storage Service (Amazon S3). Only destinations from the same account 
            and region are supported.</p>
        
        <p>Before you can enable invocation logging, you need to set up an Amazon S3 or CloudWatch Logs destination. You can enable invocation logging through either the console or the API.</p>
        
        <div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#setup-s3-destination">Set up an Amazon S3 destination</a></li><li><a href="#setup-cloudwatch-logs-destination">Set up CloudWatch Logs destination</a></li><li><a href="#model-invocation-logging-console">Using the console</a></li><li><a href="#using-apis-logging">Using APIs with invocation logging</a></li></ul></div>
        
         
            <h3 id="setup-s3-destination">Set up an Amazon S3 destination</h3> 
            <p>You can set up an S3 destination for logging in Amazon Bedrock with these steps:</p>
            <div class="procedure"><ol><li>
                    <p>Create an S3 bucket where the logs will be delivered.</p>
                </li><li>
                    <p>Add a bucket policy to it like the one below (Replace values for
                            <code class="replaceable">accountId</code>, <code class="replaceable">region</code>,
                            <code class="replaceable">bucketName</code>, and optionally
                            <code class="replaceable">prefix</code>):</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>A bucket policy is automatically attached to the bucket on your behalf when you configure 
                            logging with the permissions <code class="code">S3:GetBucketPolicy</code> and <code class="code">S3:PutBucketPolicy</code>.</p></div></div>
                    
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "AmazonBedrockLogsWrite",
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "bedrock.amazonaws.com"
      },
      "Action": [
        "s3:PutObject"
      ],
      "Resource": [
        "arn:aws:s3:::<code class="replaceable">bucketName</code>/<code class="replaceable">prefix</code>/AWSLogs/<code class="replaceable">accountId</code>/BedrockModelInvocationLogs/*"
      ],
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:SourceAccount": "<code class="replaceable">accountId</code>" 
        },
        "ArnLike": <span>{</span>
           "aws:SourceArn": "arn:aws:bedrock:<code class="replaceable">region</code>:<code class="replaceable">accountId</code>:*"
        }
      }
    }
  ]
}
                </code></pre>
                </li><li>
                    
                    <p>(Optional) If configuring SSE-KMS on the bucket, add the below policy on the KMS key:</p>
                    
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Effect": "Allow",
    "Principal": <span>{</span>
        "Service": "bedrock.amazonaws.com"
    },
    "Action": "kms:GenerateDataKey",
    "Resource": "*",
    "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:SourceAccount": "<code class="replaceable">accountId</code>" 
        },
        "ArnLike": <span>{</span>
           "aws:SourceArn": "arn:aws:bedrock:<code class="replaceable">region</code>:<code class="replaceable">accountId</code>:*"
        }
    }
}                </code></pre>
                </li></ol></div>
            
            <p> For more information on S3 SSE-KMS configurations, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/specifying-kms-encryption.html">Specifying KMS Encryption</a>.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The bucket ACL must be disabled in order for the bucket policy to take effect.
                    For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ensure-object-ownership.html">Disabling ACLs for all new buckets and enforcing Object Ownership</a>.</p></div></div>
            
         
        
         
            <h3 id="setup-cloudwatch-logs-destination">Set up CloudWatch Logs destination</h3> 
            <p>You can set up a Amazon CloudWatch Logs destination for logging in Amazon Bedrock with the following steps:</p>
            <div class="procedure"><ol><li>
                    <p>Create a CloudWatch log group where the logs will be published.</p>
                </li><li>
                    <p>Create an IAM role with the following permissions for CloudWatch Logs.</p>
                    <p><b>Trusted entity</b>:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "bedrock.amazonaws.com"
      },
      "Action": "sts:AssumeRole",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:SourceAccount": "<code class="replaceable">accountId</code>" 
        },
        "ArnLike": <span>{</span>
          "aws:SourceArn": "arn:aws:bedrock:<code class="replaceable">region</code>:<code class="replaceable">accountId</code>:*"
        }
      }
    }
  ]
}
                </code></pre>
                    
                    <p><b>Role policy</b>:</p>
                    
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17", 
    "Statement": [ 
        <span>{</span>
            "Effect": "Allow", 
            "Action": [ 
                "logs:CreateLogStream", 
                "logs:PutLogEvents" 
            ], 
            "Resource": "arn:aws:logs:<code class="replaceable">region</code>:<code class="replaceable">accountId</code>:log-group:<code class="replaceable">logGroupName</code>:log-stream:aws/bedrock/modelinvocations" 
         } 
    ]
}
                </code></pre>
                </li></ol></div>
            <p> For more information on setting up SSE for CloudWatch Logs, see <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html">Encrypt log data in CloudWatch Logs using AWS Key Management Service</a>.</p>
         
        
         
            <h3 id="model-invocation-logging-console">Using the console</h3>
            
            <p>To enable model invocation logging, drag the slider button next to the <b>Logging</b> 
                toggle switch in the <b>Settings</b> page.
                Additional configuration settings for logging will appear on the panel.</p>
            
            <p>Choose which data requests and responses you want to publish to the logs. You can choose any 
                combination of the following output options:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Text</p>
                </li><li class="listitem">
                    <p>Image</p>
                </li><li class="listitem">
                    <p>Embedding</p>
                </li></ul></div>
            <p>Choose where to 
                publish the logs:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Amazon S3 only</p>
                </li><li class="listitem">
                    <p>CloudWatch Logs only</p>
                </li><li class="listitem">
                    <p>Both Amazon S3 and CloudWatch Logs
                    </p>
                </li></ul></div>
            <p>Amazon S3 and CloudWatch Logs destinations are supported for invocation logs, and small
                input and output data. For large input and output data or binary image outputs, only
                Amazon S3 is supported. The following details summarize how the data will be represented
                in the target location.</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><b>S3 destination</b> â Gzipped JSON files, each
                        containing a batch of invocation log records, are delivered to the specified S3
                        bucket. Similar to a CloudWatch Logs event, each record will contain 
                        the invocation metadata, and input and output JSON bodies of up to 100 KB in size. 
                        Binary data or JSON bodies
                        larger than 100 KB will be uploaded as individual objects in the specified Amazon S3
                        bucket under the data prefix. The data can be queried using Amazon S3 Select and Amazon Athena, and 
                        can be catalogued for ETL using AWS Glue. The data can be loaded into OpenSearch service, 
                        or be processed by any Amazon EventBridge targets. </p>
                </li><li class="listitem">
                    <p><b>CloudWatch Logs destination</b> â JSON invocation log
                        events are delivered to a specified log group in CloudWatch Logs.
                        The log event contains the invocation metadata, and input and output JSON bodies of up to 100 KB in
                        size. If an Amazon S3 location for large data delivery is provided, binary data or JSON bodies larger 
                        than 100 KB will be uploaded to the Amazon S3 bucket under the data prefix instead.
                        data can be queried using CloudWatch Logs Insights, and can be further streamed to various services in
                        real-time using CloudWatch Logs.</p>
                </li></ul></div>
            
         
        
         
            <h3 id="using-apis-logging">Using APIs with invocation logging</h3> 
            <p>Model invocation logging can be configured using the following APIs:</p>
            <div class="itemizedlist">
                 
                 
                 
                
            <ul class="itemizedlist"><li class="listitem">
                    <p><code class="code">PutModelInvocationLoggingConfiguration</code> </p>
                </li><li class="listitem">
                    <p><code class="code">GetModelInvocationLoggingConfiguration</code> </p>
                </li><li class="listitem">
                    <p><code class="code">DeleteModelInvocationLoggingConfiguration</code> </p>
                </li></ul></div>
            <p>For more information on how to use APIs with invocation logging, see the Bedrock API Guide.</p>
         
            
        
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./model-lifecycle.html">Model lifecycle</div><div id="next" class="next-link" accesskey="n" href="./using-console.html">Console overview</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=2d8c2a09-1dac-41bf-9893-c0333d272b2c&amp;topic_url=https://docs.aws.amazon.com/en_us/bedrock/latest/userguide/settings.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=2d8c2a09-1dac-41bf-9893-c0333d272b2c&amp;topic_url=https://docs.aws.amazon.com/en_us/bedrock/latest/userguide/settings.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>